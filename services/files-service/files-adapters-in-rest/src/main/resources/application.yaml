spring:
  application:
    name: files-service
  profiles:
    active: dev

server:
  port: 8080

management:
  endpoints:
    web:
      exposure:
        include: health,info,metrics,prometheus
  endpoint:
    health:
      show-details: when-authorized
  metrics:
    export:
      prometheus:
        enabled: true

logging:
  level:
    dev.cleanslice.platform: DEBUG

---
spring:
  config:
    activate:
      on-profile: dev

  datasource:
    url: jdbc:postgresql://localhost:5432/filesdb
    username: filesuser
    password: filespass
    driver-class-name: org.postgresql.Driver

  jpa:
    hibernate:
      ddl-auto: create-drop
    show-sql: true
    properties:
      hibernate:
        dialect: org.hibernate.dialect.PostgreSQLDialect

minio:
  endpoint: http://localhost:9000
  access-key: minioadmin
  secret-key: minioadmin
  bucket: files

kafka:
  bootstrap-servers: localhost:9092

keycloak:
  url: http://localhost:8080
  realm: cleanslice
  client-id: gateway
  client-secret: your-client-secret

---
spring:
  config:
    activate:
      on-profile: docker

  datasource:
    url: ${FILES_DB_URL}
    username: ${FILES_DB_USER}
    password: ${FILES_DB_PASS}

  jpa:
    hibernate:
      ddl-auto: validate

minio:
  endpoint: ${MINIO_ENDPOINT}
  access-key: ${MINIO_ACCESS_KEY}
  secret-key: ${MINIO_SECRET_KEY}
  bucket: ${MINIO_BUCKET}

kafka:
  bootstrap-servers: ${KAFKA_BOOTSTRAP_SERVERS}

keycloak:
  url: ${KEYCLOAK_URL}
  realm: ${KEYCLOAK_REALM}
  client-id: ${KEYCLOAK_CLIENT_ID}
  client-secret: ${KEYCLOAK_CLIENT_SECRET}

---
spring:
  config:
    activate:
      on-profile: mock

  autoconfigure:
    exclude:
      - org.springframework.boot.autoconfigure.security.oauth2.resource.servlet.OAuth2ResourceServerAutoConfiguration